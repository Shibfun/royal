<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Woofswap - Shibatopia NFT Minting</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #ff9100;
            --secondary-color: #ff6f61;
            --gradient-bg: linear-gradient(180deg, #1e1e2f 0%, #2a2a3d 100%);
            --card-bg: #2c2f48;
            --input-bg: #373b5c;
            --text-color: #ffffff;
            --border-radius: 15px;
        }
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: 'Poppins', sans-serif;
            background: var(--gradient-bg);
            color: var(--text-color);
            padding: 20px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .container {
            width: 100%;
            max-width: 600px;
            background: var(--card-bg);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border-radius: var(--border-radius);
            padding: 20px;
        }
        .header {
            background: linear-gradient(90deg, var(--secondary-color) 0%, var(--primary-color) 100%);
            padding: 12px;
            border-radius: var(--border-radius);
            text-align: center;
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 20px;
        }
        .connect-section button {
            padding: 12px;
            background: var(--primary-color);
            color: var(--text-color);
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-weight: bold;
            width: 100%;
            transition: background 0.2s;
            margin-bottom: 10px;
        }
        .connect-section button:hover { background: #e68a00; }
        .input-box {
            background: var(--input-bg);
            padding: 15px;
            border-radius: var(--border-radius);
            margin-bottom: 15px;
        }
        .input-box label {
            display: block;
            font-size: 0.9em;
            margin-bottom: 5px;
        }
        input, select {
            width: 100%;
            padding: 10px;
            background: var(--input-bg);
            border: none;
            border-radius: 10px;
            color: var(--text-color);
            font-size: 1em;
        }
        .action-button {
            padding: 15px;
            background: var(--primary-color);
            color: var(--text-color);
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-weight: bold;
            width: 100%;
            transition: background 0.2s;
            margin-bottom: 10px;
        }
        .action-button:disabled {
            background: #4a4f7a;
            cursor: not-allowed;
        }
        .action-button:hover:not(:disabled) { background: #e68a00; }
        .status {
            margin-top: 10px;
            font-size: 0.9em;
            color: var(--primary-color);
            text-align: center;
        }
        .nft-info {
            background: var(--input-bg);
            padding: 15px;
            border-radius: var(--border-radius);
            margin-bottom: 15px;
        }
        .nft-info p {
            font-size: 0.9em;
            margin-bottom: 5px;
        }
        .nft-info ul {
            list-style: none;
            max-height: 200px;
            overflow-y: auto;
        }
        .nft-info li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px 0;
            font-size: 0.9em;
        }
        .copy-button {
            padding: 5px 10px;
            background: #4a4f7a;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            color: var(--text-color);
            font-size: 0.8em;
        }
        .copy-button:hover { background: #5a5f8a; }
        .dog-section {
            text-align: center;
            margin-top: 20px;
        }
        .dog-section img {
            width: 60px;
            height: 60px;
            margin-bottom: 10px;
        }
        .dog-message {
            font-size: 0.9em;
            color: var(--secondary-color);
            font-style: italic;
        }
        .nft-preview {
            margin-top: 10px;
            text-align: center;
        }
        .nft-preview img {
            max-width: 100%;
            border-radius: 10px;
        }
        @media (max-width: 480px) {
            body { padding: 10px; }
            .container { padding: 15px; }
            .header { font-size: 1.1em; }
            .dog-section img { width: 50px; height: 50px; }
            .dog-message { font-size: 0.8em; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">Woofswap - Shibatopia NFT Minting</div>
        <div class="connect-section">
            <button id="connectWalletButton">Connect Wallet</button>
            <div id="networkStatus" class="status">Click to connect...</div>
        </div>
        <div class="input-box">
            <label>Mint Shibatopia NFT</label>
            <div class="nft-info" id="nftInfo" style="display: none;">
                <p id="nftInfoName"></p>
                <p id="nftInfoSymbol"></p>
                <p id="nftInfoMaxSupply"></p>
                <p id="nftInfoOwner"></p>
                <p id="nftInfoPaymentAmount"></p>
                <p id="nftInfoTotalSupply"></p>
            </div>
            <div class="input-box">
                <label for="coordX">X Coordinate (0-999)</label>
                <input type="number" id="coordX" placeholder="e.g., 500" min="0" max="999">
            </div>
            <div class="input-box">
                <label for="coordY">Y Coordinate (0-999)</label>
                <input type="number" id="coordY" placeholder="e.g., 500" min="0" max="999">
            </div>
            <div class="input-box">
                <label for="shibTerritory">SHIB Territory</label>
                <select id="shibTerritory">
                    <option value="Moonlit Shiba Plains">Moonlit Shiba Plains</option>
                    <option value="Doge Decentralands">Doge Decentralands</option>
                    <option value="Meme Mudmarsh">Meme Mudmarsh</option>
                    <option value="Paw Powerfield">Paw Powerfield</option>
                    <option value="Ryoshi Rift">Ryoshi Rift</option>
                    <option value="Bone Burnbog">Bone Burnbog</option>
                    <option value="Woof Wastewilds">Woof Wastewilds</option>
                    <option value="Kibble Kindlecrag">Kibble Kindlecrag</option>
                    <option value="Sushi Sandstorm">Sushi Sandstorm</option>
                    <option value="Leash Lunar Lake">Leash Lunar Lake</option>
                    <option value="Tail Token Tundra">Tail Token Tundra</option>
                    <option value="Puddle Pump Prairie">Puddle Pump Prairie</option>
                    <option value="Snout Shiba Swamp">Snout Shiba Swamp</option>
                    <option value="Howl HODL Heath">Howl HODL Heath</option>
                    <option value="Fur Flux Fen">Fur Flux Fen</option>
                    <option value="Chewy Crypto Canyon">Chewy Crypto Canyon</option>
                    <option value="Rocket Ridge">Rocket Ridge</option>
                    <option value="Burn Blaze Vale">Burn Blaze Vale</option>
                    <option value="Swap Savanna">Swap Savanna</option>
                    <option value="Stake Starscar">Stake Starscar</option>
                </select>
            </div>
            <div class="input-box">
                <label for="shibaTrove">Shiba Trove</label>
                <select id="shibaTrove">
                    <option value="SHIB Shilling Stash">SHIB Shilling Stash</option>
                    <option value="Doge Digital Diamond">Doge Digital Diamond</option>
                    <option value="Meme Moonstone">Meme Moonstone</option>
                    <option value="Paw Photon">Paw Photon</option>
                    <option value="Ryoshi Reliquary">Ryoshi Reliquary</option>
                    <option value="Bone Bury Bounty">Bone Bury Bounty</option>
                    <option value="Woof Wager Core">Woof Wager Core</option>
                    <option value="Kibble Koin Clad">Kibble Koin Clad</option>
                    <option value="Sushi Stake Stone">Sushi Stake Stone</option>
                    <option value="Leash Liquidity Crystal">Leash Liquidity Crystal</option>
                    <option value="Tail Token Hoard">Tail Token Hoard</option>
                    <option value="Puddle Pump Nugget">Puddle Pump Nugget</option>
                    <option value="Snout Shibarium Shard">Snout Shibarium Shard</option>
                    <option value="Howl HODL Horde">Howl HODL Horde</option>
                    <option value="Fur Flux Vault">Fur Flux Vault</option>
                    <option value="Chewy Crypto Quartz">Chewy Crypto Quartz</option>
                    <option value="Rocket Rune Stone">Rocket Rune Stone</option>
                    <option value="Burn Bit Fragment">Burn Bit Fragment</option>
                    <option value="Swap Synth Gem">Swap Synth Gem</option>
                    <option value="Stake Star Coin">Stake Star Coin</option>
                </select>
            </div>
            <div class="input-box">
                <label for="moonRarity">Moon Rarity</label>
                <select id="moonRarity">
                    <option value="Shiba Shiller">Shiba Shiller</option>
                    <option value="Doge Degen">Doge Degen</option>
                    <option value="Meme Moon Monarch">Meme Moon Monarch</option>
                    <option value="Paw Paperhands">Paw Paperhands</option>
                    <option value="Ryoshi Rockstar">Ryoshi Rockstar</option>
                    <option value="Bone Bagholder">Bone Bagholder</option>
                    <option value="Woof Whale">Woof Whale</option>
                    <option value="Kibble Krypto King">Kibble Krypto King</option>
                    <option value="Sushi Staker">Sushi Staker</option>
                    <option value="Leash Lambo Lord">Leash Lambo Lord</option>
                    <option value="Tail Token Tycoon">Tail Token Tycoon</option>
                    <option value="Puddle Pump Prince">Puddle Pump Prince</option>
                    <option value="Snout Shiba Sultan">Snout Shiba Sultan</option>
                    <option value="Howl HODL Hero">Howl HODL Hero</option>
                    <option value="Fur Flux Fiend">Fur Flux Fiend</option>
                    <option value="Chewy Crypto Czar">Chewy Crypto Czar</option>
                    <option value="Rocket Ranger">Rocket Ranger</option>
                    <option value="Burn Baron">Burn Baron</option>
                    <option value="Swap Sovereign">Swap Sovereign</option>
                    <option value="Stake Star Master">Stake Star Master</option>
                </select>
            </div>
            <div class="input-box">
                <label for="shibaSurge">Shiba Surge</label>
                <select id="shibaSurge">
                    <option value="Shiba Spark Surge">Shiba Spark Surge</option>
                    <option value="Doge Dazzle">Doge Dazzle</option>
                    <option value="Meme Meteor Glow">Meme Meteor Glow</option>
                    <option value="Paw Pulse Wave">Paw Pulse Wave</option>
                    <option value="Ryoshi Radiance">Ryoshi Radiance</option>
                    <option value="Bone Burn Burst">Bone Burn Burst</option>
                    <option value="Woof Volt Vibe">Woof Volt Vibe</option>
                    <option value="Kibble Kindle Flame">Kibble Kindle Flame</option>
                    <option value="Sushi Storm Spark">Sushi Storm Spark</option>
                    <option value="Leash Lunar Flare">Leash Lunar Flare</option>
                    <option value="Tail Token Tide">Tail Token Tide</option>
                    <option value="Puddle Pump Rush">Puddle Pump Rush</option>
                    <option value="Snout Shiba Shock">Snout Shiba Shock</option>
                    <option value="Howl HODL Haze">Howl HODL Haze</option>
                    <option value="Fur Flux Fire">Fur Flux Fire</option>
                    <option value="Chewy Crypto Current">Chewy Crypto Current</option>
                    <option value="Rocket Rumble">Rocket Rumble</option>
                    <option value="Burn Blaze Bolt">Burn Blaze Bolt</option>
                    <option value="Swap Synth Stream">Swap Synth Stream</option>
                    <option value="Stake Star Glow">Stake Star Glow</option>
                </select>
            </div>
            <div class="input-box">
                <label for="shibaShrine">Shiba Shrine</label>
                <select id="shibaShrine">
                    <option value="Shiba Sanctuary">Shiba Sanctuary</option>
                    <option value="Doge DeFi Den">Doge DeFi Den</option>
                    <option value="Meme Moon Monument">Meme Moon Monument</option>
                    <option value="Paw Pump Altar">Paw Pump Altar</option>
                    <option value="Ryoshi Relic Ridge">Ryoshi Relic Ridge</option>
                    <option value="Bone Bury Bunker">Bone Bury Bunker</option>
                    <option value="Woof Wager Wall">Woof Wager Wall</option>
                    <option value="Kibble Koin Crypt">Kibble Koin Crypt</option>
                    <option value="Sushi Stake Stele">Sushi Stake Stele</option>
                    <option value="Leash Liquidity Lair">Leash Liquidity Lair</option>
                    <option value="Tail Token Throne">Tail Token Throne</option>
                    <option value="Puddle Pump Prism">Puddle Pump Prism</option>
                    <option value="Snout Shibarium Pillar">Snout Shibarium Pillar</option>
                    <option value="Howl HODL Haven">Howl HODL Haven</option>
                    <option value="Fur Flux Forge">Fur Flux Forge</option>
                    <option value="Chewy Crypto Cairn">Chewy Crypto Cairn</option>
                    <option value="Rocket Rune Tower">Rocket Rune Tower</option>
                    <option value="Burn Blaze Spire">Burn Blaze Spire</option>
                    <option value="Swap Synth Shrine">Swap Synth Shrine</option>
                    <option value="Stake Star Pylon">Stake Star Pylon</option>
                </select>
            </div>
            <button class="action-button" id="mintButton" onclick="mintNFT()">Mint NFT</button>
            <div class="nft-info">
                <label>Owned Shibatopia NFTs</label>
                <ul id="ownedNFTsList"></ul>
            </div>
            <div class="nft-preview" id="nftPreview" style="display: none;">
                <p>NFT Preview</p>
                <img id="nftImage" src="" alt="NFT Preview">
            </div>
        </div>
        <div class="dog-section">
            <img src="https://raw.githubusercontent.com/Shibfun/ChainBridge/refs/heads/main/images/shiba.gif" alt="Shiba Dog">
            <div class="dog-message" id="dogMessage">Woof! Connect your wallet to start minting Shibatopia NFTs, pup!</div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/web3@1.7.0/dist/web3.min.js"></script>
    <script>
        const nftContractAddress = '0x34E70d6082B268049aefB42ab4bfFE7bea93e969';
        const nftAbi = [
            {
                "inputs": [
                    { "internalType": "uint256", "name": "x", "type": "uint256" },
                    { "internalType": "uint256", "name": "y", "type": "uint256" },
                    { "internalType": "string", "name": "_tokenURI", "type": "string" },
                    { "internalType": "string[5]", "name": "attributes", "type": "string[5]" }
                ],
                "name": "mintNFT",
                "outputs": [],
                "stateMutability": "payable",
                "type": "function"
            },
            {
                "anonymous": false,
                "inputs": [
                    { "indexed": true, "internalType": "address", "name": "to", "type": "address" },
                    { "indexed": true, "internalType": "uint256", "name": "tokenId", "type": "uint256" },
                    { "indexed": false, "internalType": "uint256", "name": "x", "type": "uint256" },
                    { "indexed": false, "internalType": "uint256", "name": "y", "type": "uint256" }
                ],
                "name": "Minted",
                "type": "event"
            },
            {
                "inputs": [
                    { "internalType": "uint256", "name": "tokenId", "type": "uint256" }
                ],
                "name": "tokenURI",
                "outputs": [
                    { "internalType": "string", "name": "", "type": "string" }
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [
                    { "internalType": "uint256", "name": "tokenId", "type": "uint256" }
                ],
                "name": "name",
                "outputs": [
                    { "internalType": "string", "name": "", "type": "string" }
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "name",
                "outputs": [
                    { "internalType": "string", "name": "", "type": "string" }
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "symbol",
                "outputs": [
                    { "internalType": "string", "name": "", "type": "string" }
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "MAX_SUPPLY",
                "outputs": [
                    { "internalType": "uint256", "name": "", "type": "uint256" }
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "contractOwner",
                "outputs": [
                    { "internalType": "address", "name": "", "type": "address" }
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "MINT_PRICE",
                "outputs": [
                    { "internalType": "uint256", "name": "", "type": "uint256" }
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "totalSupply",
                "outputs": [
                    { "internalType": "uint256", "name": "", "type": "uint256" }
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [
                    { "internalType": "address", "name": "user", "type": "address" },
                    { "internalType": "uint256", "name": "startIndex", "type": "uint256" },
                    { "internalType": "uint256", "name": "limit", "type": "uint256" }
                ],
                "name": "getTokensByOwner",
                "outputs": [
                    { "internalType": "uint256[]", "name": "", "type": "uint256[]" },
                    { "internalType": "string[]", "name": "", "type": "string[]" }
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [
                    { "internalType": "uint256", "name": "", "type": "uint256" }
                ],
                "name": "coordinatesMinted",
                "outputs": [
                    { "internalType": "bool", "name": "", "type": "bool" }
                ],
                "stateMutability": "view",
                "type": "function"
            }
        ];

        const chains = {
            Shibarium: {
                chainId: 109,
                chainName: 'Shibarium',
                rpcUrl: 'https://rpc.shibariumchain.com'
            }
        };

        let web3, account, nftContract;
        const fromChain = 'Shibarium';

        const dogMessages = {
            connectSuccess: ["Woof! Wallet connected, ready to mint NFTs, pup!", "Arf! You're in, let's make some NFTs!", "Bark! Wallet's ready, time to mint!"],
            connectFail: ["Woof! Couldn't connect wallet, try again, pup!", "Arf! Wallet connection failed, give it another go!", "Bark! Something went wrong, check your wallet!"],
            mintStart: ["Woof! Minting your NFT, hold tight, pup!", "Arf! Crafting your NFT now!", "Bark! Minting in progress!"],
            mintSuccess: ["Woof! NFT minted, you're a collector, pup!", "Arf! Your NFT is ready, check it out!", "Bark! Success! NFT created!"],
            mintFail: ["Woof! Minting failed, check details, pup!", "Arf! Something went wrong, try again!", "Bark! Minting hit a snag, retry!"],
            mintExists: ["Woof! This coordinate is already minted, pup!", "Arf! That spot is taken, try another!", "Bark! Coordinate already claimed, pick a new one!"],
            noInput: ["Woof! Enter all required fields, pup!", "Arf! Can't proceed with empty fields!", "Bark! Need all details to continue!"],
            userDenied: ["Woof! You canceled the transaction, pup!", "Arf! Transaction denied, try again when ready!", "Bark! You said no, let's try again!"],
            invalidContract: ["Woof! Invalid NFT contract address, check it, pup!", "Arf! That contract doesn't exist, try another!", "Bark! Bad contract address, fix it!"],
            networkFail: ["Woof! Failed to switch to Shibarium, pup!", "Arf! Network switch failed, try again!", "Bark! Can't connect to Shibarium, check your settings!"]
        };

        function getRandomMessage(type) {
            const messages = dogMessages[type];
            return messages[Math.floor(Math.random() * messages.length)];
        }

        async function initializeWeb3() {
            const status = document.getElementById('networkStatus');
            const dogMessage = document.getElementById('dogMessage');

            if (!window.ethereum) {
                status.innerText = 'Please install MetaMask';
                dogMessage.innerText = 'Woof! MetaMask not found, pup!';
                return;
            }

            try {
                web3 = new Web3(window.ethereum);
                const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                account = accounts[0];
                document.getElementById('connectWalletButton').innerText = `Connected: ${account.slice(0, 6)}...${account.slice(-4)}`;

                await switchNetwork(fromChain);
                await initializeContracts();
                await updateNFTInfo();

                status.innerText = `Connected to ${fromChain}`;
                dogMessage.innerText = getRandomMessage('connectSuccess');
            } catch (error) {
                status.innerText = 'Failed to connect wallet';
                dogMessage.innerText = getRandomMessage('connectFail');
                console.error(error.message);
            }
        }

        async function switchNetwork(chain) {
            const chainConfig = chains[chain];
            const status = document.getElementById('networkStatus');
            const dogMessage = document.getElementById('dogMessage');

            try {
                await window.ethereum.request({
                    method: 'wallet_switchEthereumChain',
                    params: [{ chainId: `0x${chainConfig.chainId.toString(16)}` }]
                });
            } catch (switchError) {
                if (switchError.code === 4902) {
                    try {
                        await window.ethereum.request({
                            method: 'wallet_addEthereumChain',
                            params: [{
                                chainId: `0x${chainConfig.chainId.toString(16)}`,
                                chainName: chainConfig.chainName,
                                rpcUrls: [chainConfig.rpcUrl],
                                nativeCurrency: { name: chainConfig.chainName, symbol: 'BONE', decimals: 18 },
                                blockExplorerUrls: ['https://shibariumscan.io']
                            }]
                        });
                    } catch (addError) {
                        status.innerText = 'Failed to add Shibarium network';
                        dogMessage.innerText = getRandomMessage('networkFail');
                        console.error(addError.message);
                        throw addError;
                    }
                } else {
                    status.innerText = 'Failed to switch to Shibarium';
                    dogMessage.innerText = getRandomMessage('networkFail');
                    console.error(switchError.message);
                    throw switchError;
                }
            }
        }

        async function initializeContracts() {
            nftContract = new web3.eth.Contract(nftAbi, nftContractAddress);
            document.getElementById('nftInfo').style.display = 'none';
            document.getElementById('nftPreview').style.display = 'none';
        }

        async function updateNFTInfo() {
            if (!web3 || !web3.utils.isAddress(nftContractAddress)) {
                document.getElementById('nftInfo').style.display = 'none';
                document.getElementById('nftPreview').style.display = 'none';
                document.getElementById('dogMessage').innerText = getRandomMessage('invalidContract');
                return;
            }
            try {
                const [name, symbol, maxSupply, owner, mintPrice, totalSupply] = await Promise.all([
                    nftContract.methods.name().call(),
                    nftContract.methods.symbol().call(),
                    nftContract.methods.MAX_SUPPLY().call(),
                    nftContract.methods.contractOwner().call(),
                    nftContract.methods.MINT_PRICE().call(),
                    nftContract.methods.totalSupply().call()
                ]);
                document.getElementById('nftInfoName').innerText = `Name: ${name}`;
                document.getElementById('nftInfoSymbol').innerText = `Symbol: ${symbol}`;
                document.getElementById('nftInfoMaxSupply').innerText = `Max Supply: ${maxSupply}`;
                document.getElementById('nftInfoOwner').innerText = `Owner: ${owner}`;
                document.getElementById('nftInfoPaymentAmount').innerText = `Mint Price: ${web3.utils.fromWei(mintPrice, 'ether')} BONE`;
                document.getElementById('nftInfoTotalSupply').innerText = `Total Minted: ${totalSupply}`;
                document.getElementById('nftInfo').style.display = 'block';
                await updateOwnedNFTs();
            } catch (error) {
                document.getElementById('nftInfo').style.display = 'none';
                document.getElementById('dogMessage').innerText = getRandomMessage('invalidContract');
                console.error(error.message);
            }
        }

        async function updateOwnedNFTs() {
            if (!web3 || !account || !web3.utils.isAddress(nftContractAddress)) return;
            try {
                const list = document.getElementById('ownedNFTsList');
                list.innerHTML = '';
                const result = await nftContract.methods.getTokensByOwner(account, 0, 10).call();
                const tokenIds = result[0];
                const coords = result[1];
                const nfts = tokenIds.map((tokenId, index) => ({
                    tokenId: tokenId,
                    coord: coords[index]
                })).filter(nft => nft.coord !== '');
                if (nfts.length === 0) {
                    list.innerHTML = '<li>No NFTs owned yet.</li>';
                    return;
                }
                for (const nft of nfts) {
                    const tokenURI = await nftContract.methods.tokenURI(nft.tokenId).call();
                    const li = document.createElement('li');
                    li.innerText = `NFT: ${nft.coord} (ID: ${nft.tokenId})`;
                    const viewButton = document.createElement('button');
                    viewButton.className = 'copy-button';
                    viewButton.innerText = 'View';
                    viewButton.onclick = () => {
                        const json = JSON.parse(atob(tokenURI.split(',')[1]));
                        document.getElementById('nftImage').src = json.image;
                        document.getElementById('nftPreview').style.display = 'block';
                    };
                    li.appendChild(viewButton);
                    list.appendChild(li);
                }
            } catch (error) {
                document.getElementById('ownedNFTsList').innerHTML = '<li>Error loading NFTs.</li>';
                console.error(error.message);
            }
        }

        async function waitForTransaction(txHash) {
            let receipt = null;
            const maxAttempts = 30;
            let attempts = 0;
            while (attempts < maxAttempts) {
                receipt = await web3.eth.getTransactionReceipt(txHash);
                if (receipt) {
                    if (receipt.status) {
                        return receipt;
                    } else {
                        throw new Error(`Transaction ${txHash} failed`);
                    }
                }
                await new Promise(resolve => setTimeout(resolve, 2000));
                attempts++;
            }
            throw new Error(`Transaction ${txHash} not confirmed after ${maxAttempts} attempts`);
        }

        function generateSVG(x, y, attributes) {
            let svg = `
<svg version='1.1' width='1000' height='1000' viewBox='0 0 36 36' xmlns='http://www.w3.org/2000/svg' shape-rendering='crispEdges'>
  <rect height='100%' width='100%' fill='#1A0F0A' />
  <g class='floating'>
    <rect class='c0' x='0' y='0' width='1' height='1' />
    <rect class='c0' x='1' y='0' width='1' height='1' />
    <rect class='c0' x='2' y='0' width='1' height='1' />
    <rect class='c1' x='3' y='0' width='1' height='1' />
    <rect class='c1' x='4' y='0' width='1' height='1' />
    <rect class='c1' x='5' y='0' width='1' height='1' />
    <rect class='c1' x='6' y='0' width='1' height='1' />
    <rect class='c1' x='7' y='0' width='1' height='1' />
    <rect class='c1' x='8' y='0' width='1' height='1' />
    <rect class='c1' x='9' y='0' width='1' height='1' />
    <rect class='c1' x='10' y='0' width='1' height='1' />
    <rect class='c1' x='11' y='0' width='1' height='1' />
    <rect class='c1' x='12' y='0' width='1' height='1' />
    <rect class='c1' x='13' y='0' width='1' height='1' />
    <rect class='c1' x='14' y='0' width='1' height='1' />
    <rect class='c1' x='15' y='0' width='1' height='1' />
    <rect class='c1' x='16' y='0' width='1' height='1' />
    <rect class='c1' x='17' y='0' width='1' height='1' />
    <rect class='c1' x='18' y='0' width='1' height='1' />
    <rect class='c1' x='19' y='0' width='1' height='1' />
    <rect class='c0' x='20' y='0' width='1' height='1' />
    <rect class='c0' x='21' y='0' width='1' height='1' />
    <rect class='c0' x='22' y='0' width='1' height='1' />
    <rect class='c0' x='23' y='0' width='1' height='1' />
    <rect class='c0' x='0' y='1' width='1' height='1' />
    <rect class='c0' x='1' y='1' width='1' height='1' />
    <rect class='c1' x='2' y='1' width='1' height='1' />
    <rect class='c2' x='3' y='1' width='1' height='1' />
    <rect class='c2' x='4' y='1' width='1' height='1' />
    <rect class='c2' x='5' y='1' width='1' height='1' />
    <rect class='c2' x='6' y='1' width='1' height='1' />
    <rect class='c2' x='7' y='1' width='1' height='1' />
    <rect class='c2' x='8' y='1' width='1' height='1' />
    <rect class='c2' x='9' y='1' width='1' height='1' />
    <rect class='c2' x='10' y='1' width='1' height='1' />
    <rect class='c2' x='11' y='1' width='1' height='1' />
    <rect class='c2' x='12' y='1' width='1' height='1' />
    <rect class='c2' x='13' y='1' width='1' height='1' />
    <rect class='c2' x='14' y='1' width='1' height='1' />
    <rect class='c2' x='15' y='1' width='1' height='1' />
    <rect class='c2' x='16' y='1' width='1' height='1' />
    <rect class='c2' x='17' y='1' width='1' height='1' />
    <rect class='c2' x='18' y='1' width='1' height='1' />
    <rect class='c2' x='19' y='1' width='1' height='1' />
    <rect class='c1' x='20' y='1' width='1' height='1' />
    <rect class='c0' x='21' y='1' width='1' height='1' />
    <rect class='c0' x='22' y='1' width='1' height='1' />
    <rect class='c0' x='23' y='1' width='1' height='1' />
    <rect class='c0' x='0' y='2' width='1' height='1' />
    <rect class='c0' x='1' y='2' width='1' height='1' />
    <rect class='c1' x='2' y='2' width='1' height='1' />
    <rect class='c2' x='3' y='2' width='1' height='1' />
    <rect class='c3' x='4' y='2' width='1' height='1' />
    <rect class='c3' x='5' y='2' width='1' height='1' />
    <rect class='c3' x='6' y='2' width='1' height='1' />
    <rect class='c3' x='7' y='2' width='1' height='1' />
    <rect class='c3' x='8' y='2' width='1' height='1' />
    <rect class='c3' x='9' y='2' width='1' height='1' />
    <rect class='c3' x='10' y='2' width='1' height='1' />
    <rect class='c3' x='11' y='2' width='1' height='1' />
    <rect class='c3' x='12' y='2' width='1' height='1' />
    <rect class='c3' x='13' y='2' width='1' height='1' />
    <rect class='c3' x='14' y='2' width='1' height='1' />
    <rect class='c3' x='15' y='2' width='1' height='1' />
    <rect class='c3' x='16' y='2' width='1' height='1' />
    <rect class='c3' x='17' y='2' width='1' height='1' />
    <rect class='c3' x='18' y='2' width='1' height='1' />
    <rect class='c2' x='19' y='2' width='1' height='1' />
    <rect class='c1' x='20' y='2' width='1' height='1' />
    <rect class='c0' x='21' y='2' width='1' height='1' />
    <rect class='c0' x='22' y='2' width='1' height='1' />
    <rect class='c0' x='23' y='2' width='1' height='1' />
    <rect class='c0' x='0' y='3' width='1' height='1' />
    <rect class='c0' x='1' y='3' width='1' height='1' />
    <rect class='c0' x='2' y='3' width='1' height='1' />
    <rect class='c1' x='3' y='3' width='1' height='1' />
    <rect class='c1' x='4' y='3' width='1' height='1' />
    <rect class='c1' x='5' y='3' width='1' height='1' />
    <rect class='c1' x='6' y='3' width='1' height='1' />
    <rect class='c1' x='7' y='3' width='1' height='1' />
    <rect class='c1' x='8' y='3' width='1' height='1' />
    <rect class='c1' x='9' y='3' width='1' height='1' />
    <rect class='c1' x='10' y='3' width='1' height='1' />
    <rect class='c1' x='11' y='3' width='1' height='1' />
    <rect class='c1' x='12' y='3' width='1' height='1' />
    <rect class='c1' x='13' y='3' width='1' height='1' />
    <rect class='c1' x='14' y='3' width='1' height='1' />
    <rect class='c1' x='15' y='3' width='1' height='1' />
    <rect class='c1' x='16' y='3' width='1' height='1' />
    <rect class='c1' x='17' y='3' width='1' height='1' />
    <rect class='c1' x='18' y='3' width='1' height='1' />
    <rect class='c1' x='19' y='3' width='1' height='1' />
    <rect class='c0' x='20' y='3' width='1' height='1' />
    <rect class='c0' x='21' y='3' width='1' height='1' />
    <rect class='c0' x='22' y='3' width='1' height='1' />
    <rect class='c0' x='23' y='3' width='1' height='1' />
    <rect class='c0' x='0' y='4' width='1' height='1' />
    <rect class='c0' x='1' y='4' width='1' height='1' />
    <rect class='c0' x='2' y='4' width='1' height='1' />
    <rect class='c4' x='3' y='4' width='1' height='1' />
    <rect class='c3' x='4' y='4' width='1' height='1' />
    <rect class='c3' x='5' y='4' width='1' height='1' />
    <rect class='c3' x='6' y='4' width='1' height='1' />
    <rect class='c3' x='7' y='4' width='1' height='1' />
    <rect class='c3' x='8' y='4' width='1' height='1' />
    <rect class='c3' x='9' y='4' width='1' height='1' />
    <rect class='c3' x='10' y='4' width='1' height='1' />
    <rect class='c3' x='11' y='4' width='1' height='1' />
    <rect class='c3' x='12' y='4' width='1' height='1' />
    <rect class='c3' x='13' y='4' width='1' height='1' />
    <rect class='c3' x='14' y='4' width='1' height='1' />
    <rect class='c3' x='15' y='4' width='1' height='1' />
    <rect class='c3' x='16' y='4' width='1' height='1' />
    <rect class='c3' x='17' y='4' width='1' height='1' />
    <rect class='c3' x='18' y='4' width='1' height='1' />
    <rect class='c4' x='19' y='4' width='1' height='1' />
    <rect class='c0' x='20' y='4' width='1' height='1' />
    <rect class='c0' x='21' y='4' width='1' height='1' />
    <rect class='c0' x='22' y='4' width='1' height='1' />
    <rect class='c0' x='23' y='4' width='1' height='1' />
    <rect class='c0' x='0' y='5' width='1' height='1' />
    <rect class='c0' x='1' y='5' width='1' height='1' />
    <rect class='c0' x='2' y='5' width='1' height='1' />
    <rect class='c4' x='3' y='5' width='1' height='1' />
    <rect class='c2' x='4' y='5' width='1' height='1' />
    <rect class='c2' x='5' y='5' width='1' height='1' />
    <rect class='c2' x='6' y='5' width='1' height='1' />
    <rect class='c2' x='7' y='5' width='1' height='1' />
    <rect class='c2' x='8' y='5' width='1' height='1' />
    <rect class='c2' x='9' y='5' width='1' height='1' />
    <rect class='c2' x='10' y='5' width='1' height='1' />
    <rect class='c2' x='11' y='5' width='1' height='1' />
    <rect class='c2' x='12' y='5' width='1' height='1' />
    <rect class='c2' x='13' y='5' width='1' height='1' />
    <rect class='c2' x='14' y='5' width='1' height='1' />
    <rect class='c2' x='15' y='5' width='1' height='1' />
    <rect class='c2' x='16' y='5' width='1' height='1' />
    <rect class='c2' x='17' y='5' width='1' height='1' />
    <rect class='c3' x='18' y='5' width='1' height='1' />
    <rect class='c4' x='19' y='5' width='1' height='1' />
    <rect class='c0' x='20' y='5' width='1' height='1' />
    <rect class='c0' x='21' y='5' width='1' height='1' />
    <rect class='c0' x='22' y='5' width='1' height='1' />
    <rect class='c0' x='23' y='5' width='1' height='1' />
    <rect class='c0' x='0' y='6' width='1' height='1' />
    <rect class='c0' x='1' y='6' width='1' height='1' />
    <rect class='c0' x='2' y='6' width='1' height='1' />
    <rect class='c4' x='3' y='6' width='1' height='1' />
    <rect class='c2' x='4' y='6' width='1' height='1' />
    <rect class='c2' x='5' y='6' width='1' height='1' />
    <rect class='c2' x='6' y='6' width='1' height='1' />
    <rect class='c2' x='7' y='6' width='1' height='1' />
    <rect class='c2' x='8' y='6' width='1' height='1' />
    <rect class='c2' x='9' y='6' width='1' height='1' />
    <rect class='c2' x='10' y='6' width='1' height='1' />
    <rect class='c2' x='11' y='6' width='1' height='1' />
    <rect class='c2' x='12' y='6' width='1' height='1' />
    <rect class='c2' x='13' y='6' width='1' height='1' />
    <rect class='c2' x='14' y='6' width='1' height='1' />
    <rect class='c2' x='15' y='6' width='1' height='1' />
    <rect class='c2' x='16' y='6' width='1' height='1' />
    <rect class='c2' x='17' y='6' width='1' height='1' />
    <rect class='c3' x='18' y='6' width='1' height='1' />
    <rect class='c4' x='19' y='6' width='1' height='1' />
    <rect class='c0' x='20' y='6' width='1' height='1' />
    <rect class='c0' x='21' y='6' width='1' height='1' />
    <rect class='c0' x='22' y='6' width='1' height='1' />
    <rect class='c0' x='23' y='6' width='1' height='1' />
    <rect class='c0' x='0' y='7' width='1' height='1' />
    <rect class='c0' x='1' y='7' width='1' height='1' />
    <rect class='c0' x='2' y='7' width='1' height='1' />
    <rect class='c1' x='3' y='7' width='1' height='1' />
    <rect class='c2' x='4' y='7' width='1' height='1' />
    <rect class='c2' x='5' y='7' width='1' height='1' />
    <rect class='c2' x='6' y='7' width='1' height='1' />
    <rect class='c2' x='7' y='7' width='1' height='1' />
    <rect class='c2' x='8' y='7' width='1' height='1' />
    <rect class='c2' x='9' y='7' width='1' height='1' />
    <rect class='c2' x='10' y='7' width='1' height='1' />
    <rect class='c2' x='11' y='7' width='1' height='1' />
    <rect class='c2' x='12' y='7' width='1' height='1' />
    <rect class='c2' x='13' y='7' width='1' height='1' />
    <rect class='c2' x='14' y='7' width='1' height='1' />
    <rect class='c2' x='15' y='7' width='1' height='1' />
    <rect class='c2' x='16' y='7' width='1' height='1' />
    <rect class='c2' x='17' y='7' width='1' height='1' />
    <rect class='c3' x='18' y='7' width='1' height='1' />
    <rect class='c4' x='19' y='7' width='1' height='1' />
    <rect class='c0' x='20' y='7' width='1' height='1' />
    <rect class='c0' x='21' y='7' width='1' height='1' />
    <rect class='c0' x='22' y='7' width='1' height='1' />
    <rect class='c0' x='23' y='7' width='1' height='1' />
    <rect class='c0' x='0' y='8' width='1' height='1' />
    <rect class='c0' x='1' y='8' width='1' height='1' />
    <rect class='c0' x='2' y='8' width='1' height='1' />
    <rect class='c4' x='3' y='8' width='1' height='1' />
    <rect class='c2' x='4' y='8' width='1' height='1' />
    <rect class='c2' x='5' y='8' width='1' height='1' />
    <rect class='c2' x='6' y='8' width='1' height='1' />
    <rect class='c2' x='7' y='8' width='1' height='1' />
    <rect class='c2' x='8' y='8' width='1' height='1' />
    <rect class='c2' x='9' y='8' width='1' height='1' />
    <rect class='c2' x='10' y='8' width='1' height='1' />
    <rect class='c2' x='11' y='8' width='1' height='1' />
    <rect class='c2' x='12' y='8' width='1' height='1' />
    <rect class='c2' x='13' y='8' width='1' height='1' />
    <rect class='c2' x='14' y='8' width='1' height='1' />
    <rect class='c2' x='15' y='8' width='1' height='1' />
    <rect class='c2' x='16' y='8' width='1' height='1' />
    <rect class='c2' x='17' y='8' width='1' height='1' />
    <rect class='c3' x='18' y='8' width='1' height='1' />
    <rect class='c4' x='19' y='8' width='1' height='1' />
    <rect class='c0' x='20' y='8' width='1' height='1' />
    <rect class='c0' x='21' y='8' width='1' height='1' />
    <rect class='c0' x='22' y='8' width='1' height='1' />
    <rect class='c0' x='23' y='8' width='1' height='1' />
    <rect class='c0' x='0' y='9' width='1' height='1' />
    <rect class='c0' x='1' y='9' width='1' height='1' />
    <rect class='c0' x='2' y='9' width='1' height='1' />
    <rect class='c1' x='3' y='9' width='1' height='1' />
    <rect class='c2' x='4' y='9' width='1' height='1' />
    <rect class='c2' x='5' y='9' width='1' height='1' />
    <rect class='c2' x='6' y='9' width='1' height='1' />
    <rect class='c2' x='7' y='9' width='1' height='1' />
    <rect class='c2' x='8' y='9' width='1' height='1' />
    <rect class='c2' x='9' y='9' width='1' height='1' />
    <rect class='c2' x='10' y='9' width='1' height='1' />
    <rect class='c2' x='11' y='9' width='1' height='1' />
    <rect class='c2' x='12' y='9' width='1' height='1' />
    <rect class='c2' x='13' y='9' width='1' height='1' />
    <rect class='c2' x='14' y='9' width='1' height='1' />
    <rect class='c2' x='15' y='9' width='1' height='1' />
    <rect class='c2' x='16' y='9' width='1' height='1' />
    <rect class='c2' x='17' y='9' width='1' height='1' />
    <rect class='c3' x='18' y='9' width='1' height='1' />
    <rect class='c4' x='19' y='9' width='1' height='1' />
    <rect class='c0' x='20' y='9' width='1' height='1' />
    <rect class='c0' x='21' y='9' width='1' height='1' />
    <rect class='c0' x='22' y='9' width='1' height='1' />
    <rect class='c0' x='23' y='9' width='1' height='1' />
    <rect class='c0' x='0' y='10' width='1' height='1' />
    <rect class='c0' x='1' y='10' width='1' height='1' />
    <rect class='c0' x='2' y='10' width='1' height='1' />
    <rect class='c1' x='3' y='10' width='1' height='1' />
    <rect class='c2' x='4' y='10' width='1' height='1' />
    <rect class='c2' x='5' y='10' width='1' height='1' />
    <rect class='c2' x='6' y='10' width='1' height='1' />
    <rect class='c2' x='7' y='10' width='1' height='1' />
    <rect class='c2' x='8' y='10' width='1' height='1' />
    <rect class='c2' x='9' y='10' width='1' height='1' />
    <rect class='c2' x='10' y='10' width='1' height='1' />
    <rect class='c2' x='11' y='10' width='1' height='1' />
    <rect class='c2' x='12' y='10' width='1' height='1' />
    <rect class='c2' x='13' y='10' width='1' height='1' />
    <rect class='c2' x='14' y='10' width='1' height='1' />
    <rect class='c2' x='15' y='10' width='1' height='1' />
    <rect class='c2' x='16' y='10' width='1' height='1' />
    <rect class='c2' x='17' y='10' width='1' height='1' />
    <rect class='c3' x='18' y='10' width='1' height='1' />
    <rect class='c4' x='19' y='10' width='1' height='1' />
    <rect class='c0' x='20' y='10' width='1' height='1' />
    <rect class='c0' x='21' y='10' width='1' height='1' />
    <rect class='c0' x='22' y='10' width='1' height='1' />
    <rect class='c0' x='23' y='10' width='1' height='1' />
    <rect class='c0' x='0' y='11' width='1' height='1' />
    <rect class='c0' x='1' y='11' width='1' height='1' />
    <rect class='c0' x='2' y='11' width='1' height='1' />
    <rect class='c0' x='3' y='11' width='1' height='1' />
    <rect class='c1' x='4' y='11' width='1' height='1' />
    <rect class='c2' x='5' y='11' width='1' height='1' />
    <rect class='c2' x='6' y='11' width='1' height='1' />
    <rect class='c2' x='7' y='11' width='1' height='1' />
    <rect class='c2' x='8' y='11' width='1' height='1' />
    <rect class='c2' x='9' y='11' width='1' height='1' />
    <rect class='c2' x='10' y='11' width='1' height='1' />
    <rect class='c2' x='11' y='11' width='1' height='1' />
    <rect class='c2' x='12' y='11' width='1' height='1' />
    <rect class='c2' x='13' y='11' width='1' height='1' />
    <rect class='c2' x='14' y='11' width='1' height='1' />
    <rect class='c2' x='15' y='11' width='1' height='1' />
    <rect class='c2' x='16' y='11' width='1' height='1' />
    <rect class='c2' x='17' y='11' width='1' height='1' />
    <rect class='c3' x='18' y='11' width='1' height='1' />
    <rect class='c4' x='19' y='11' width='1' height='1' />
    <rect class='c0' x='20' y='11' width='1' height='1' />
    <rect class='c0' x='21' y='11' width='1' height='1' />
    <rect class='c0' x='22' y='11' width='1' height='1' />
    <rect class='c0' x='23' y='11' width='1' height='1' />
    <rect class='c0' x='0' y='12' width='1' height='1' />
    <rect class='c0' x='1' y='12' width='1' height='1' />
    <rect class='c0' x='2' y='12' width='1' height='1' />
    <rect class='c1' x='3' y='12' width='1' height='1' />
    <rect class='c2' x='4' y='12' width='1' height='1' />
    <rect class='c2' x='5' y='12' width='1' height='1' />
    <rect class='c2' x='6' y='12' width='1' height='1' />
    <rect class='c2' x='7' y='12' width='1' height='1' />
    <rect class='c2' x='8' y='12' width='1' height='1' />
    <rect class='c2' x='9' y='12' width='1' height='1' />
    <rect class='c2' x='10' y='12' width='1' height='1' />
    <rect class='c2' x='11' y='12' width='1' height='1' />
    <rect class='c2' x='12' y='12' width='1' height='1' />
    <rect class='c2' x='13' y='12' width='1' height='1' />
    <rect class='c2' x='14' y='12' width='1' height='1' />
    <rect class='c2' x='15' y='12' width='1' height='1' />
    <rect class='c2' x='16' y='12' width='1' height='1' />
    <rect class='c2' x='17' y='12' width='1' height='1' />
    <rect class='c3' x='18' y='12' width='1' height='1' />
    <rect class='c4' x='19' y='12' width='1' height='1' />
    <rect class='c0' x='20' y='12' width='1' height='1' />
    <rect class='c0' x='21' y='12' width='1' height='1' />
    <rect class='c0' x='22' y='12' width='1' height='1' />
    <rect class='c0' x='23' y='12' width='1' height='1' />
    <rect class='c0' x='0' y='13' width='1' height='1' />
    <rect class='c0' x='1' y='13' width='1' height='1' />
    <rect class='c0' x='2' y='13' width='1' height='1' />
    <rect class='c1' x='3' y='13' width='1' height='1' />
    <rect class='c2' x='4' y='13' width='1' height='1' />
    <rect class='c2' x='5' y='13' width='1' height='1' />
    <rect class='c2' x='6' y='13' width='1' height='1' />
    <rect class='c2' x='7' y='13' width='1' height='1' />
    <rect class='c2' x='8' y='13' width='1' height='1' />
    <rect class='c2' x='9' y='13' width='1' height='1' />
    <rect class='c2' x='10' y='13' width='1' height='1' />
    <rect class='c2' x='11' y='13' width='1' height='1' />
    <rect class='c2' x='12' y='13' width='1' height='1' />
    <rect class='c2' x='13' y='13' width='1' height='1' />
    <rect class='c2' x='14' y='13' width='1' height='1' />
    <rect class='c2' x='15' y='13' width='1' height='1' />
    <rect class='c2' x='16' y='13' width='1' height='1' />
    <rect class='c2' x='17' y='13' width='1' height='1' />
    <rect class='c3' x='18' y='13' width='1' height='1' />
    <rect class='c1' x='19' y='13' width='1' height='1' />
    <rect class='c0' x='20' y='13' width='1' height='1' />
    <rect class='c0' x='21' y='13' width='1' height='1' />
    <rect class='c0' x='22' y='13' width='1' height='1' />
    <rect class='c0' x='23' y='13' width='1' height='1' />
    <rect class='c0' x='0' y='14' width='1' height='1' />
    <rect class='c0' x='1' y='14' width='1' height='1' />
    <rect class='c0' x='2' y='14' width='1' height='1' />
    <rect class='c4' x='3' y='14' width='1' height='1' />
    <rect class='c2' x='4' y='14' width='1' height='1' />
    <rect class='c2' x='5' y='14' width='1' height='1' />
    <rect class='c2' x='6' y='14' width='1' height='1' />
    <rect class='c2' x='7' y='14' width='1' height='1' />
    <rect class='c2' x='8' y='14' width='1' height='1' />
    <rect class='c2' x='9' y='14' width='1' height='1' />
    <rect class='c2' x='10' y='14' width='1' height='1' />
    <rect class='c2' x='11' y='14' width='1' height='1' />
    <rect class='c2' x='12' y='14' width='1' height='1' />
    <rect class='c2' x='13' y='14' width='1' height='1' />
    <rect class='c2' x='14' y='14' width='1' height='1' />
    <rect class='c2' x='15' y='14' width='1' height='1' />
    <rect class='c2' x='16' y='14' width='1' height='1' />
    <rect class='c2' x='17' y='14' width='1' height='1' />
    <rect class='c3' x='18' y='14' width='1' height='1' />
    <rect class='c4' x='19' y='14' width='1' height='1' />
    <rect class='c0' x='20' y='14' width='1' height='1' />
    <rect class='c0' x='21' y='14' width='1' height='1' />
    <rect class='c0' x='22' y='14' width='1' height='1' />
    <rect class='c0' x='23' y='14' width='1' height='1' />
    <rect class='c0' x='0' y='15' width='1' height='1' />
    <rect class='c0' x='1' y='15' width='1' height='1' />
    <rect class='c0' x='2' y='15' width='1' height='1' />
    <rect class='c1' x='3' y='15' width='1' height='1' />
    <rect class='c2' x='4' y='15' width='1' height='1' />
    <rect class='c2' x='5' y='15' width='1' height='1' />
    <rect class='c2' x='6' y='15' width='1' height='1' />
    <rect class='c2' x='7' y='15' width='1' height='1' />
    <rect class='c2' x='8' y='15' width='1' height='1' />
    <rect class='c2' x='9' y='15' width='1' height='1' />
    <rect class='c2' x='10' y='15' width='1' height='1' />
    <rect class='c2' x='11' y='15' width='1' height='1' />
    <rect class='c2' x='12' y='15' width='1' height='1' />
    <rect class='c2' x='13' y='15' width='1' height='1' />
    <rect class='c2' x='14' y='15' width='1' height='1' />
    <rect class='c2' x='15' y='15' width='1' height='1' />
    <rect class='c2' x='16' y='15' width='1' height='1' />
    <rect class='c2' x='17' y='15' width='1' height='1' />
    <rect class='c3' x='18' y='15' width='1' height='1' />
    <rect class='c1' x='19' y='15' width='1' height='1' />
    <rect class='c0' x='20' y='15' width='1' height='1' />
    <rect class='c0' x='21' y='15' width='1' height='1' />
    <rect class='c0' x='22' y='15' width='1' height='1' />
    <rect class='c0' x='23' y='15' width='1' height='1' />
    <rect class='c0' x='0' y='16' width='1' height='1' />
    <rect class='c0' x='1' y='16' width='1' height='1' />
    <rect class='c0' x='2' y='16' width='1' height='1' />
    <rect class='c4' x='3' y='16' width='1' height='1' />
    <rect class='c2' x='4' y='16' width='1' height='1' />
    <rect class='c2' x='5' y='16' width='1' height='1' />
    <rect class='c2' x='6' y='16' width='1' height='1' />
    <rect class='c2' x='7' y='16' width='1' height='1' />
    <rect class='c2' x='8' y='16' width='1' height='1' />
    <rect class='c2' x='9' y='16' width='1' height='1' />
    <rect class='c2' x='10' y='16' width='1' height='1' />
    <rect class='c2' x='11' y='16' width='1' height='1' />
    <rect class='c2' x='12' y='16' width='1' height='1' />
    <rect class='c2' x='13' y='16' width='1' height='1' />
    <rect class='c2' x='14' y='16' width='1' height='1' />
    <rect class='c2' x='15' y='16' width='1' height='1' />
    <rect class='c2' x='16' y='16' width='1' height='1' />
    <rect class='c2' x='17' y='16' width='1' height='1' />
    <rect class='c1' x='18' y='16' width='1' height='1' />
    <rect class='c0' x='19' y='16' width='1' height='1' />
    <rect class='c0' x='20' y='16' width='1' height='1' />
    <rect class='c0' x='21' y='16' width='1' height='1' />
    <rect class='c0' x='22' y='16' width='1' height='1' />
    <rect class='c0' x='23' y='16' width='1' height='1' />
    <rect class='c0' x='0' y='17' width='1' height='1' />
    <rect class='c0' x='1' y='17' width='1' height='1' />
    <rect class='c0' x='2' y='17' width='1' height='1' />
    <rect class='c4' x='3' y='17' width='1' height='1' />
    <rect class='c2' x='4' y='17' width='1' height='1' />
    <rect class='c2' x='5' y='17' width='1' height='1' />
    <rect class='c2' x='6' y='17' width='1' height='1' />
    <rect class='c2' x='7' y='17' width='1' height='1' />
    <rect class='c2' x='8' y='17' width='1' height='1' />
    <rect class='c2' x='9' y='17' width='1' height='1' />
    <rect class='c2' x='10' y='17' width='1' height='1' />
    <rect class='c2' x='11' y='17' width='1' height='1' />
    <rect class='c2' x='12' y='17' width='1' height='1' />
    <rect class='c2' x='13' y='17' width='1' height='1' />
    <rect class='c2' x='14' y='17' width='1' height='1' />
    <rect class='c2' x='15' y='17' width='1' height='1' />
    <rect class='c2' x='16' y='17' width='1' height='1' />
    <rect class='c2' x='17' y='17' width='1' height='1' />
    <rect class='c3' x='18' y='17' width='1' height='1' />
    <rect class='c1' x='19' y='17' width='1' height='1' />
    <rect class='c0' x='20' y='17' width='1' height='1' />
    <rect class='c0' x='21' y='17' width='1' height='1' />
    <rect class='c0' x='22' y='17' width='1' height='1' />
    <rect class='c0' x='23' y='17' width='1' height='1' />
    <rect class='c0' x='0' y='18' width='1' height='1' />
    <rect class='c0' x='1' y='18' width='1' height='1' />
    <rect class='c0' x='2' y='18' width='1' height='1' />
    <rect class='c4' x='3' y='18' width='1' height='1' />
    <rect class='c2' x='4' y='18' width='1' height='1' />
    <rect class='c2' x='5' y='18' width='1' height='1' />
    <rect class='c2' x='6' y='18' width='1' height='1' />
    <rect class='c2' x='7' y='18' width='1' height='1' />
    <rect class='c2' x='8' y='18' width='1' height='1' />
    <rect class='c2' x='9' y='18' width='1' height='1' />
    <rect class='c2' x='10' y='18' width='1' height='1' />
    <rect class='c2' x='11' y='18' width='1' height='1' />
    <rect class='c2' x='12' y='18' width='1' height='1' />
    <rect class='c2' x='13' y='18' width='1' height='1' />
    <rect class='c2' x='14' y='18' width='1' height='1' />
    <rect class='c2' x='15' y='18' width='1' height='1' />
    <rect class='c2' x='16' y='18' width='1' height='1' />
    <rect class='c2' x='17' y='18' width='1' height='1' />
    <rect class='c3' x='18' y='18' width='1' height='1' />
    <rect class='c1' x='19' y='18' width='1' height='1' />
    <rect class='c0' x='20' y='18' width='1' height='1' />
    <rect class='c0' x='21' y='18' width='1' height='1' />
    <rect class='c0' x='22' y='18' width='1' height='1' />
    <rect class='c0' x='23' y='18' width='1' height='1' />
    <rect class='c0' x='0' y='19' width='1' height='1' />
    <rect class='c0' x='1' y='19' width='1' height='1' />
    <rect class='c0' x='2' y='19' width='1' height='1' />
    <rect class='c4' x='3' y='19' width='1' height='1' />
    <rect class='c2' x='4' y='19' width='1' height='1' />
    <rect class='c2' x='5' y='19' width='1' height='1' />
    <rect class='c2' x='6' y='19' width='1' height='1' />
    <rect class='c2' x='7' y='19' width='1' height='1' />
    <rect class='c2' x='8' y='19' width='1' height='1' />
    <rect class='c2' x='9' y='19' width='1' height='1' />
    <rect class='c2' x='10' y='19' width='1' height='1' />
    <rect class='c2' x='11' y='19' width='1' height='1' />
    <rect class='c2' x='12' y='19' width='1' height='1' />
    <rect class='c2' x='13' y='19' width='1' height='1' />
    <rect class='c2' x='14' y='19' width='1' height='1' />
    <rect class='c2' x='15' y='19' width='1' height='1' />
    <rect class='c2' x='16' y='19' width='1' height='1' />
    <rect class='c3' x='17' y='19' width='1' height='1' />
    <rect class='c3' x='18' y='19' width='1' height='1' />
    <rect class='c4' x='19' y='19' width='1' height='1' />
    <rect class='c0' x='20' y='19' width='1' height='1' />
    <rect class='c0' x='21' y='19' width='1' height='1' />
    <rect class='c0' x='22' y='19' width='1' height='1' />
    <rect class='c0' x='23' y='19' width='1' height='1' />
    <rect class='c0' x='0' y='20' width='1' height='1' />
    <rect class='c0' x='1' y='20' width='1' height='1' />
    <rect class='c0' x='2' y='20' width='1' height='1' />
    <rect class='c1' x='3' y='20' width='1' height='1' />
    <rect class='c1' x='4' y='20' width='1' height='1' />
    <rect class='c1' x='5' y='20' width='1' height='1' />
    <rect class='c1' x='6' y='20' width='1' height='1' />
    <rect class='c1' x='7' y='20' width='1' height='1' />
    <rect class='c1' x='8' y='20' width='1' height='1' />
    <rect class='c1' x='9' y='20' width='1' height='1' />
    <rect class='c1' x='10' y='20' width='1' height='1' />
    <rect class='c1' x='11' y='20' width='1' height='1' />
    <rect class='c1' x='12' y='20' width='1' height='1' />
    <rect class='c1' x='13' y='20' width='1' height='1' />
    <rect class='c1' x='14' y='20' width='1' height='1' />
    <rect class='c1' x='15' y='20' width='1' height='1' />
    <rect class='c1' x='16' y='20' width='1' height='1' />
    <rect class='c1' x='17' y='20' width='1' height='1' />
    <rect class='c1' x='18' y='20' width='1' height='1' />
    <rect class='c1' x='19' y='20' width='1' height='1' />
    <rect class='c0' x='20' y='20' width='1' height='1' />
    <rect class='c0' x='21' y='20' width='1' height='1' />
    <rect class='c0' x='22' y='20' width='1' height='1' />
    <rect class='c0' x='23' y='20' width='1' height='1' />
    <rect class='c0' x='0' y='21' width='1' height='1' />
    <rect class='c0' x='1' y='21' width='1' height='1' />
    <rect class='c1' x='2' y='21' width='1' height='1' />
    <rect class='c2' x='3' y='21' width='1' height='1' />
    <rect class='c2' x='4' y='21' width='1' height='1' />
    <rect class='c2' x='5' y='21' width='1' height='1' />
    <rect class='c2' x='6' y='21' width='1' height='1' />
    <rect class='c2' x='7' y='21' width='1' height='1' />
    <rect class='c2' x='8' y='21' width='1' height='1' />
    <rect class='c2' x='9' y='21' width='1' height='1' />
    <rect class='c2' x='10' y='21' width='1' height='1' />
    <rect class='c2' x='11' y='21' width='1' height='1' />
    <rect class='c2' x='12' y='21' width='1' height='1' />
    <rect class='c2' x='13' y='21' width='1' height='1' />
    <rect class='c2' x='14' y='21' width='1' height='1' />
    <rect class='c2' x='15' y='21' width='1' height='1' />
    <rect class='c2' x='16' y='21' width='1' height='1' />
    <rect class='c2' x='17' y='21' width='1' height='1' />
    <rect class='c2' x='18' y='21' width='1' height='1' />
    <rect class='c2' x='19' y='21' width='1' height='1' />
    <rect class='c1' x='20' y='21' width='1' height='1' />
    <rect class='c0' x='21' y='21' width='1' height='1' />
    <rect class='c0' x='22' y='21' width='1' height='1' />
    <rect class='c0' x='23' y='21' width='1' height='1' />
    <rect class='c0' x='0' y='22' width='1' height='1' />
    <rect class='c0' x='1' y='22' width='1' height='1' />
    <rect class='c1' x='2' y='22' width='1' height='1' />
    <rect class='c2' x='3' y='22' width='1' height='1' />
    <rect class='c3' x='4' y='22' width='1' height='1' />
    <rect class='c3' x='5' y='22' width='1' height='1' />
    <rect class='c3' x='6' y='22' width='1' height='1' />
    <rect class='c3' x='7' y='22' width='1' height='1' />
    <rect class='c3' x='8' y='22' width='1' height='1' />
    <rect class='c3' x='9' y='22' width='1' height='1' />
    <rect class='c3' x='10' y='22' width='1' height='1' />
    <rect class='c3' x='11' y='22' width='1' height='1' />
    <rect class='c3' x='12' y='22' width='1' height='1' />
    <rect class='c3' x='13' y='22' width='1' height='1' />
    <rect class='c3' x='14' y='22' width='1' height='1' />
    <rect class='c3' x='15' y='22' width='1' height='1' />
    <rect class='c3' x='16' y='22' width='1' height='1' />
    <rect class='c3' x='17' y='22' width='1' height='1' />
    <rect class='c3' x='18' y='22' width='1' height='1' />
    <rect class='c2' x='19' y='22' width='1' height='1' />
    <rect class='c1' x='20' y='22' width='1' height='1' />
    <rect class='c0' x='21' y='22' width='1' height='1' />
    <rect class='c0' x='22' y='22' width='1' height='1' />
    <rect class='c0' x='23' y='22' width='1' height='1' />
    <rect class='c0' x='0' y='23' width='1' height='1' />
    <rect class='c0' x='1' y='23' width='1' height='1' />
    <rect class='c0' x='2' y='23' width='1' height='1' />
    <rect class='c1' x='3' y='23' width='1' height='1' />
    <rect class='c1' x='4' y='23' width='1' height='1' />
    <rect class='c1' x='5' y='23' width='1' height='1' />
    <rect class='c1' x='6' y='23' width='1' height='1' />
    <rect class='c1' x='7' y='23' width='1' height='1' />
    <rect class='c1' x='8' y='23' width='1' height='1' />
    <rect class='c1' x='9' y='23' width='1' height='1' />
    <rect class='c1' x='10' y='23' width='1' height='1' />
    <rect class='c1' x='11' y='23' width='1' height='1' />
    <rect class='c1' x='12' y='23' width='1' height='1' />
    <rect class='c1' x='13' y='23' width='1' height='1' />
    <rect class='c1' x='14' y='23' width='1' height='1' />
    <rect class='c1' x='15' y='23' width='1' height='1' />
    <rect class='c1' x='16' y='23' width='1' height='1' />
    <rect class='c1' x='17' y='23' width='1' height='1' />
    <rect class='c1' x='18' y='23' width='1' height='1' />
    <rect class='c1' x='19' y='23' width='1' height='1' />
    <rect class='c0' x='20' y='23' width='1' height='1' />
    <rect class='c0' x='21' y='23' width='1' height='1' />
    <rect class='c0' x='22' y='23' width='1' height='1' />
    <rect class='c0' x='23' y='23' width='1' height='1' />
    <text font-family='Silkscreen' class='t0' x='5.5' y='7'>${attributes[0]}</text>
    <text font-family='Silkscreen' class='t1' x='5.5' y='9'>${attributes[1]}</text>
    <text font-family='Silkscreen' class='t2' x='5.5' y='11'>${attributes[2]}</text>
    <text font-family='Silkscreen' class='t3' x='5.5' y='13'>${attributes[3]}</text>
    <text font-family='Silkscreen' class='t4' x='5.5' y='15'>${attributes[4]}</text>
  </g>
  <text x='50%' y='33' dominant-baseline='middle' text-anchor='middle' class='title'>SHITO (${x}, ${y})</text>
<style>
  @font-face {
    font-family: Silkscreen;
    font-style: normal;
    src: url(data:font/truetype;charset=utf-8;base64,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
    ) format('truetype');
  }
  .title {
    font-family: Silkscreen;
    font-size: 2px;
    fill: #FFFFFF;
  }
  .floating {
    animation: floating 4s ease-in-out infinite alternate;
  }
  @keyframes floating {
    from {
      transform: translate(6.5px, 3.5px);
      filter: drop-shadow(0px 0px 1.25px rgba(255, 165, 0, 0.65));
    }
    50% {
      transform: translate(6.5px, 5px);
      filter: drop-shadow(0px 0px 2.5px rgba(255, 165, 0, 1));
    }
    to {
      transform: translate(6.5px, 3.5px);
      filter: drop-shadow(0px 0px 1.25px rgba(255, 165, 0, 0.65));
    }
  }
  .t0, .t1, .t2, .t3, .t4 {
    font-family: Silkscreen;
    font-size: 1.15px;
    fill: #000000;
    animation: textOneAnim 10.5s ease-in-out infinite forwards;
    opacity: 0;
    animation-delay: 0.25s;
  }
  .t1 {
    animation-delay: 1.5s;
  }
  .t2 {
    animation-delay: 2.5s;
  }
  .t3 {
    animation-delay: 3.5s;
  }
  .t4 {
    animation-delay: 4.5s;
  }
  @keyframes textOneAnim {
    from {
      opacity: 0;
    }
    10% {
      opacity: 1;
    }
    42.5% {
      opacity: 1;
    }
    50% {
      opacity: 0;
    }
    to {
      opacity: 0;
    }
  }
  @keyframes textTwoAnim {
    from {
      opacity: 0;
    }
    22.5% {
      opacity: 1;
    }
    30% {
      opacity: 1;
    }
    40% {
      opacity: 1;
    }
    50% {
      opacity: 0;
    }
    to {
      opacity: 0;
    }
  }
  .c0 {
    fill: transparent;
  }
  .c1 {
    fill: #8B5523;
  }
  .c2 {
    fill: #E6B800;
  }
  .c3 {
    fill: #D68B00;
  }
  .c4 {
    fill: #5C3D1A;
  }
</style>
</svg>
            `;
            return svg;
        }

        function generateTokenURI(x, y, attributes) {
            const svg = generateSVG(x, y, attributes);
            const svgBase64 = btoa(svg);
            const metadata = {
                name: `Shibatopia (${x}, ${y})`,
                description: `A unique Shibatopia NFT at coordinates (${x}, ${y}) with custom attributes.`,
                image: `data:image/svg+xml;base64,${svgBase64}`,
                attributes: [
                    { trait_type: "SHIB Territory", value: attributes[0] },
                    { trait_type: "Shiba Trove", value: attributes[1] },
                    { trait_type: "Moon Rarity", value: attributes[2] },
                    { trait_type: "Shiba Surge", value: attributes[3] },
                    { trait_type: "Shiba Shrine", value: attributes[4] }
                ]
            };
            const metadataBase64 = btoa(JSON.stringify(metadata));
            return `data:application/json;base64,${metadataBase64}`;
        }

        async function mintNFT() {
            const status = document.getElementById('networkStatus');
            const mintButton = document.getElementById('mintButton');
            const dogMessage = document.getElementById('dogMessage');

            if (!web3 || !account) {
                status.innerText = "Please connect wallet first.";
                dogMessage.innerText = getRandomMessage('connectFail');
                return;
            }

            const x = parseInt(document.getElementById('coordX').value);
            const y = parseInt(document.getElementById('coordY').value);
            const shibTerritory = document.getElementById('shibTerritory').value;
            const shibaTrove = document.getElementById('shibaTrove').value;
            const moonRarity = document.getElementById('moonRarity').value;
            const shibaSurge = document.getElementById('shibaSurge').value;
            const shibaShrine = document.getElementById('shibaShrine').value;
            const attributes = [shibTerritory, shibaTrove, moonRarity, shibaSurge, shibaShrine];

            if (isNaN(x) || isNaN(y) || x < 0 || x > 999 || y < 0 || y > 999) {
                status.innerText = "Coordinates must be between 0 and 999.";
                dogMessage.innerText = "Woof! Invalid coordinates, pup!";
                return;
            }

            try {
                mintButton.disabled = true;
                mintButton.innerText = "Checking...";
                dogMessage.innerText = getRandomMessage('mintStart');

                const coordinate = x * 1000 + y;
                const isMinted = await nftContract.methods.coordinatesMinted(coordinate).call();

                if (isMinted) {
                    status.innerText = "Coordinate already minted.";
                    dogMessage.innerText = getRandomMessage('mintExists');
                    mintButton.innerText = "Mint NFT";
                    mintButton.disabled = false;
                    return;
                }

                const mintPrice = await nftContract.methods.MINT_PRICE().call();
                const balance = await web3.eth.getBalance(account);
                if (web3.utils.toBN(balance).lt(web3.utils.toBN(mintPrice))) {
                    status.innerText = "Insufficient BONE balance.";
                    dogMessage.innerText = "Woof! Not enough BONE, pup!";
                    mintButton.innerText = "Mint NFT";
                    mintButton.disabled = false;
                    return;
                }

                const tokenURI = generateTokenURI(x, y, attributes);
                mintButton.innerText = "Minting...";
                const tx = await nftContract.methods.mintNFT(x, y, tokenURI, attributes).send({
                    from: account,
                    gas: web3.utils.toHex(2000000),
                    value: mintPrice
                });

                await waitForTransaction(tx.transactionHash);
                status.innerText = "NFT minted successfully!";
                dogMessage.innerText = getRandomMessage('mintSuccess');
                await updateNFTInfo();
            } catch (error) {
                if (error.code === 4001) {
                    status.innerText = "Transaction canceled by user.";
                    dogMessage.innerText = getRandomMessage('userDenied');
                } else {
                    status.innerText = "Minting failed.";
                    dogMessage.innerText = getRandomMessage('mintFail');
                    console.error(error.message);
                }
            } finally {
                mintButton.innerText = "Mint NFT";
                mintButton.disabled = false;
            }
        }

        document.getElementById('connectWalletButton').addEventListener('click', initializeWeb3);
    </script>
</body>
</html>
